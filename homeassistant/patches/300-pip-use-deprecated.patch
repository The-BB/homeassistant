--- a/homeassistant/util/package.py
+++ b/homeassistant/util/package.py
@@ -25,7 +25,8 @@ def is_virtual_env() -> bool:
 
 def is_docker_env() -> bool:
     """Return True if we run in a docker env."""
-    return Path("/.dockerenv").exists()
+#    return Path("/.dockerenv").exists()
+    return False
 
 
 def is_installed(package: str) -> bool:
@@ -73,7 +74,7 @@ def install_package(
     # Not using 'import pip; pip.main([])' because it breaks the logger
     _LOGGER.info("Attempting install of %s", package)
     env = os.environ.copy()
-    args = [sys.executable, "-m", "pip", "install", "--quiet", package]
+    args = [sys.executable, "-m", "pip", "install", "--use-deprecated=legacy-resolver", "--quiet", package]
     if timeout:
         args += ["--timeout", str(timeout)]
     if no_cache_dir:
